import{u as C}from"./user-B0TDWnTr.js";import{_ as y,m as k,c as s,b as t,F as a,h as p,t as x,f as _,g as m,e as u,A as g,p as q,r as j,o as S,y as N,z as P,d as D}from"./index-Dexc0AZ2.js";import{d as $}from"./dimensionService-BXhW0tq7.js";const T="/assets/cover/Insufficient%20Permission.png",w={key:0,class:"highlight"},A={key:1,class:"warning"},H={key:2},V={__name:"HighlightedText",props:{text:{type:String,required:!0},highlights:{type:Array,default:()=>[]}},setup(i){const l=i,r=k(()=>{if(!l.highlights||l.highlights.length===0)return[{text:l.text,highlight:!1}];const e=[];let n=l.text;return[...l.highlights].sort((h,v)=>{const R=l.text.indexOf(h),L=l.text.indexOf(v);return R-L}).forEach(h=>{const v=n.indexOf(h);v!==-1&&(v>0&&e.push({text:n.substring(0,v),highlight:!1}),e.push({text:h,highlight:!0}),n=n.substring(v+h.length))}),n&&e.push({text:n,highlight:!1}),e});return(e,n)=>(t(),s("span",null,[(t(!0),s(a,null,p(r.value,(o,h)=>(t(),s(a,{key:h},[o.highlight?(t(),s("span",w,x(o.text),1)):o.warning?(t(),s("span",A,x(o.text),1)):(t(),s("span",H,x(o.text),1))],64))),128))]))}},d=y(V,[["__scopeId","data-v-fe8d7f6f"]]),B={class:"paragraph"},M={__name:"ParagraphRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("p",B,[_(d,{text:i.content.text,highlights:i.content.highlights},null,8,["text","highlights"])]))}},O=y(M,[["__scopeId","data-v-282c4ab2"]]),z={class:"list"},E={__name:"ListRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("ul",z,[(t(!0),s(a,null,p(i.content.items,(e,n)=>(t(),s("li",{key:n,class:"list-item"},[_(d,{text:e.text,highlights:e.highlights},null,8,["text","highlights"])]))),128))]))}},F=y(E,[["__scopeId","data-v-2f177a47"]]),Q={class:"numbered-list"},U={__name:"NumberedListRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("ol",Q,[(t(!0),s(a,null,p(i.content.items,(e,n)=>(t(),s("li",{key:n,class:"numbered-item"},[_(d,{text:e.text,highlights:e.highlights},null,8,["text","highlights"])]))),128))]))}},G=y(U,[["__scopeId","data-v-3dfc4ba0"]]),J={class:"nested-list"},K={key:0,class:"sub-list"},W={__name:"NestedListRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("ul",J,[(t(!0),s(a,null,p(i.content.items,(e,n)=>(t(),s("li",{key:n,class:"nested-item"},[_(d,{text:e.text,highlights:e.highlights},null,8,["text","highlights"]),e.subItems?(t(),s("ul",K,[(t(!0),s(a,null,p(e.subItems,(o,h)=>(t(),s("li",{key:h,class:"sub-item"},[_(d,{text:o},null,8,["text"])]))),128))])):m("",!0)]))),128))]))}},X=y(W,[["__scopeId","data-v-91d09e92"]]),Y={class:"subsection"},Z={__name:"SubsectionRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("div",Y,[u("h3",null,x(i.content.title),1),(t(!0),s(a,null,p(i.content.items,(e,n)=>(t(),s(a,{key:n},[e.type==="paragraph"?(t(),g(O,{key:0,content:e},null,8,["content"])):(t(),g(d,{key:1,text:e.text,highlights:e.highlights},null,8,["text","highlights"]))],64))),128))]))}},tt=y(Z,[["__scopeId","data-v-8161d5c8"]]),et={key:0,class:"content-title"},st={key:1,class:"content-subtitle"},nt={key:0,class:"content-item labeled-item"},it={class:"item-label"},lt={class:"item-value"},rt={key:1,class:"content-item text-item"},ot={key:2,class:"content-subitems"},ct={__name:"StructuredContentRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("div",{class:q(["structured-content",i.content.style])},[i.content.title?(t(),s("h3",et,[_(d,{text:i.content.title,highlights:i.content.highlights},null,8,["text","highlights"])])):m("",!0),i.content.subtitle?(t(),s("h4",st,[_(d,{text:i.content.subtitle,highlights:i.content.highlights},null,8,["text","highlights"])])):m("",!0),(t(!0),s(a,null,p(i.content.items,(e,n)=>(t(),s(a,{key:n},[e.label&&e.value?(t(),s("div",nt,[u("span",it,[_(d,{text:e.label,highlights:e.highlights},null,8,["text","highlights"])]),u("span",lt,[_(d,{text:e.value,highlights:e.highlights},null,8,["text","highlights"])])])):e.text||typeof e=="string"?(t(),s("p",rt,[_(d,{text:typeof e=="string"?e:e.text,highlights:typeof e=="string"?i.content.highlights:e.highlights,class:q({warning:e.type==="warning"})},null,8,["text","highlights","class"])])):m("",!0),e.subItems?(t(),s("ul",ot,[(t(!0),s(a,null,p(e.subItems,(o,h)=>(t(),s("li",{key:h,class:"content-subitem"},[typeof o=="object"?(t(),g(d,{key:0,text:o.text,highlights:o.highlights,class:q({warning:o.type==="warning"})},null,8,["text","highlights","class"])):(t(),g(d,{key:1,text:o},null,8,["text"]))]))),128))])):m("",!0)],64))),128))],2))}},ut=y(ct,[["__scopeId","data-v-fafff8e7"]]),at={class:"log"},ht={class:"log-label"},dt={class:"log-value"},gt={__name:"LogRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("div",at,[(t(!0),s(a,null,p(i.content.items,(e,n)=>(t(),s("div",{key:n,class:"log-entry"},[u("span",ht,x(e.label),1),u("span",dt,[_(d,{text:e.value,highlights:e.highlights},null,8,["text","highlights"])])]))),128))]))}},_t=y(gt,[["__scopeId","data-v-3f0234ad"]]),pt={class:"quote"},xt=["innerHTML"],yt={key:1,class:"quote-text"},mt={key:2,class:"quote-author"},vt={__name:"QuoteRenderer",props:{content:{type:Object,required:!0}},setup(i){const l=i,r=k(()=>l.content.text);return(e,n)=>(t(),s("div",pt,[i.content.multiline?(t(),s("div",{key:0,innerHTML:r.value,class:"quote-text"},null,8,xt)):(t(),s("div",yt,x(i.content.text),1)),i.content.author?(t(),s("div",mt,"------ "+x(i.content.author),1)):m("",!0)]))}},I=y(vt,[["__scopeId","data-v-e50b5307"]]),ft={class:"dimension-content-renderer"},kt={__name:"DimensionContentRenderer",props:{sections:{type:Array,required:!0}},setup(i){return(l,r)=>(t(),s("div",ft,[(t(!0),s(a,null,p(i.sections,e=>(t(),s("div",{key:e.title,class:"section"},[u("h2",null,x(e.title),1),(t(!0),s(a,null,p(e.content,n=>(t(),s(a,{key:n.type},[n.type==="paragraph"?(t(),g(O,{key:0,content:n},null,8,["content"])):n.type==="list"?(t(),g(F,{key:1,content:n},null,8,["content"])):n.type==="numberedList"?(t(),g(G,{key:2,content:n},null,8,["content"])):n.type==="nestedList"?(t(),g(X,{key:3,content:n},null,8,["content"])):n.type==="subsection"?(t(),g(tt,{key:4,content:n},null,8,["content"])):n.type==="structuredContent"?(t(),g(ut,{key:5,content:n},null,8,["content"])):n.type==="log"?(t(),g(_t,{key:6,content:n},null,8,["content"])):n.type==="quote"?(t(),g(I,{key:7,content:n},null,8,["content"])):m("",!0)],64))),128)),e.quote?(t(),g(I,{key:0,content:e.quote},null,8,["content"])):m("",!0)]))),128))]))}},bt=y(kt,[["__scopeId","data-v-c2378d80"]]),$t={class:"content-section"},qt={class:"main-container"},Rt={class:"sub-nav"},Lt=["onClick"],Dt={class:"content"},It={key:0,class:"permission-restricted",id:"permissionRestricted"},Ot={class:"restricted-detail"},Ct={key:1,class:"dimension-container"},jt=["id"],St={__name:"DimensionView",setup(i){const l=C(),r=N(),e=j("pureland"),n=k(()=>l.currentUser?.permissionLevel||0),o=k(()=>$.getAllDimensions()),h=k(()=>$.getDimension(e.value)),v=f=>{e.value=f};S(()=>{const f=$.getAllDimensions();r.query.dimension&&f.some(c=>c.id===r.query.dimension)&&(e.value=r.query.dimension)}),P(()=>r.query.dimension,f=>{const c=$.getAllDimensions();f&&c.some(b=>b.id===f)&&(e.value=f)});const R=k(()=>$.hasPermission(e.value,n.value)),L=k(()=>$.getRequiredPermission(e.value));return(f,c)=>(t(),s("div",$t,[c[5]||(c[5]=u("h2",{class:"content-title"},"维度档案资料",-1)),u("div",qt,[u("ul",Rt,[(t(!0),s(a,null,p(o.value,b=>(t(),s("li",{key:b.id,class:q(["sub-nav-item",{active:e.value===b.id}]),onClick:Nt=>v(b.id)},x(b.name),11,Lt))),128))]),u("div",Dt,[R.value?(t(),s("div",Ct,[h.value?(t(),s("div",{key:0,class:q(["dimension-content",`${e.value}-content`]),id:`${e.value}-dimension`},[_(bt,{sections:h.value.content.sections},null,8,["sections"])],10,jt)):m("",!0)])):(t(),s("div",It,[c[3]||(c[3]=u("div",{class:"restricted-icon"},[u("img",{src:T,alt:"权限不足"})],-1)),c[4]||(c[4]=u("div",{class:"restricted-message"},"权限不足",-1)),u("div",Ot,[D(" 您当前的权限等级 ("+x(n.value)+") 无法访问此维度档案。",1),c[0]||(c[0]=u("br",null,null,-1)),D(" 该档案需要权限等级: "+x(L.value),1),c[1]||(c[1]=u("br",null,null,-1)),c[2]||(c[2]=D(" 请使用更高权限的账户登录。 ",-1))])]))])])]))}},At=y(St,[["__scopeId","data-v-e2b4ddd7"]]);export{At as default};
