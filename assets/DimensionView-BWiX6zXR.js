import{u as C}from"./user-CsDmEIt-.js";import{_ as y,m as k,c as s,b as t,F as u,h as p,t as x,f as _,g as m,e as a,A as g,p as q,r as j,o as S,y as N,z as T,d as D}from"./index-BDwXw7wk.js";import{d as $}from"./dimensionService-2KA3iTsw.js";const w={key:0,class:"highlight"},A={key:1,class:"warning"},P={key:2},H={__name:"HighlightedText",props:{text:{type:String,required:!0},highlights:{type:Array,default:()=>[]}},setup(i){const l=i,r=k(()=>{if(!l.highlights||l.highlights.length===0)return[{text:l.text,highlight:!1}];const e=[];let n=l.text;return[...l.highlights].sort((h,v)=>{const R=l.text.indexOf(h),L=l.text.indexOf(v);return R-L}).forEach(h=>{const v=n.indexOf(h);v!==-1&&(v>0&&e.push({text:n.substring(0,v),highlight:!1}),e.push({text:h,highlight:!0}),n=n.substring(v+h.length))}),n&&e.push({text:n,highlight:!1}),e});return(e,n)=>(t(),s("span",null,[(t(!0),s(u,null,p(r.value,(o,h)=>(t(),s(u,{key:h},[o.highlight?(t(),s("span",w,x(o.text),1)):o.warning?(t(),s("span",A,x(o.text),1)):(t(),s("span",P,x(o.text),1))],64))),128))]))}},d=y(H,[["__scopeId","data-v-fe8d7f6f"]]),V={class:"paragraph"},B={__name:"ParagraphRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("p",V,[_(d,{text:i.content.text,highlights:i.content.highlights},null,8,["text","highlights"])]))}},O=y(B,[["__scopeId","data-v-282c4ab2"]]),M={class:"list"},z={__name:"ListRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("ul",M,[(t(!0),s(u,null,p(i.content.items,(e,n)=>(t(),s("li",{key:n,class:"list-item"},[_(d,{text:e.text,highlights:e.highlights},null,8,["text","highlights"])]))),128))]))}},E=y(z,[["__scopeId","data-v-2f177a47"]]),F={class:"numbered-list"},Q={__name:"NumberedListRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("ol",F,[(t(!0),s(u,null,p(i.content.items,(e,n)=>(t(),s("li",{key:n,class:"numbered-item"},[_(d,{text:e.text,highlights:e.highlights},null,8,["text","highlights"])]))),128))]))}},U=y(Q,[["__scopeId","data-v-3dfc4ba0"]]),G={class:"nested-list"},J={key:0,class:"sub-list"},K={__name:"NestedListRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("ul",G,[(t(!0),s(u,null,p(i.content.items,(e,n)=>(t(),s("li",{key:n,class:"nested-item"},[_(d,{text:e.text,highlights:e.highlights},null,8,["text","highlights"]),e.subItems?(t(),s("ul",J,[(t(!0),s(u,null,p(e.subItems,(o,h)=>(t(),s("li",{key:h,class:"sub-item"},[_(d,{text:o},null,8,["text"])]))),128))])):m("",!0)]))),128))]))}},W=y(K,[["__scopeId","data-v-91d09e92"]]),X={class:"subsection"},Y={__name:"SubsectionRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("div",X,[a("h3",null,x(i.content.title),1),(t(!0),s(u,null,p(i.content.items,(e,n)=>(t(),s(u,{key:n},[e.type==="paragraph"?(t(),g(O,{key:0,content:e},null,8,["content"])):(t(),g(d,{key:1,text:e.text,highlights:e.highlights},null,8,["text","highlights"]))],64))),128))]))}},Z=y(Y,[["__scopeId","data-v-8161d5c8"]]),tt={key:0,class:"content-title"},et={key:1,class:"content-subtitle"},st={key:0,class:"content-item labeled-item"},nt={class:"item-label"},it={class:"item-value"},lt={key:1,class:"content-item text-item"},rt={key:2,class:"content-subitems"},ot={__name:"StructuredContentRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("div",{class:q(["structured-content",i.content.style])},[i.content.title?(t(),s("h3",tt,[_(d,{text:i.content.title,highlights:i.content.highlights},null,8,["text","highlights"])])):m("",!0),i.content.subtitle?(t(),s("h4",et,[_(d,{text:i.content.subtitle,highlights:i.content.highlights},null,8,["text","highlights"])])):m("",!0),(t(!0),s(u,null,p(i.content.items,(e,n)=>(t(),s(u,{key:n},[e.label&&e.value?(t(),s("div",st,[a("span",nt,[_(d,{text:e.label,highlights:e.highlights},null,8,["text","highlights"])]),a("span",it,[_(d,{text:e.value,highlights:e.highlights},null,8,["text","highlights"])])])):e.text||typeof e=="string"?(t(),s("p",lt,[_(d,{text:typeof e=="string"?e:e.text,highlights:typeof e=="string"?i.content.highlights:e.highlights,class:q({warning:e.type==="warning"})},null,8,["text","highlights","class"])])):m("",!0),e.subItems?(t(),s("ul",rt,[(t(!0),s(u,null,p(e.subItems,(o,h)=>(t(),s("li",{key:h,class:"content-subitem"},[typeof o=="object"?(t(),g(d,{key:0,text:o.text,highlights:o.highlights,class:q({warning:o.type==="warning"})},null,8,["text","highlights","class"])):(t(),g(d,{key:1,text:o},null,8,["text"]))]))),128))])):m("",!0)],64))),128))],2))}},ct=y(ot,[["__scopeId","data-v-fafff8e7"]]),ut={class:"log"},at={class:"log-label"},ht={class:"log-value"},dt={__name:"LogRenderer",props:{content:{type:Object,required:!0}},setup(i){return(l,r)=>(t(),s("div",ut,[(t(!0),s(u,null,p(i.content.items,(e,n)=>(t(),s("div",{key:n,class:"log-entry"},[a("span",at,x(e.label),1),a("span",ht,[_(d,{text:e.value,highlights:e.highlights},null,8,["text","highlights"])])]))),128))]))}},gt=y(dt,[["__scopeId","data-v-3f0234ad"]]),_t={class:"quote"},pt=["innerHTML"],xt={key:1,class:"quote-text"},yt={key:2,class:"quote-author"},mt={__name:"QuoteRenderer",props:{content:{type:Object,required:!0}},setup(i){const l=i,r=k(()=>l.content.text);return(e,n)=>(t(),s("div",_t,[i.content.multiline?(t(),s("div",{key:0,innerHTML:r.value,class:"quote-text"},null,8,pt)):(t(),s("div",xt,x(i.content.text),1)),i.content.author?(t(),s("div",yt,"------ "+x(i.content.author),1)):m("",!0)]))}},I=y(mt,[["__scopeId","data-v-e50b5307"]]),vt={class:"dimension-content-renderer"},ft={__name:"DimensionContentRenderer",props:{sections:{type:Array,required:!0}},setup(i){return(l,r)=>(t(),s("div",vt,[(t(!0),s(u,null,p(i.sections,e=>(t(),s("div",{key:e.title,class:"section"},[a("h2",null,x(e.title),1),(t(!0),s(u,null,p(e.content,n=>(t(),s(u,{key:n.type},[n.type==="paragraph"?(t(),g(O,{key:0,content:n},null,8,["content"])):n.type==="list"?(t(),g(E,{key:1,content:n},null,8,["content"])):n.type==="numberedList"?(t(),g(U,{key:2,content:n},null,8,["content"])):n.type==="nestedList"?(t(),g(W,{key:3,content:n},null,8,["content"])):n.type==="subsection"?(t(),g(Z,{key:4,content:n},null,8,["content"])):n.type==="structuredContent"?(t(),g(ct,{key:5,content:n},null,8,["content"])):n.type==="log"?(t(),g(gt,{key:6,content:n},null,8,["content"])):n.type==="quote"?(t(),g(I,{key:7,content:n},null,8,["content"])):m("",!0)],64))),128)),e.quote?(t(),g(I,{key:0,content:e.quote},null,8,["content"])):m("",!0)]))),128))]))}},kt=y(ft,[["__scopeId","data-v-c2378d80"]]),bt={class:"content-section"},$t={class:"main-container"},qt={class:"sub-nav"},Rt=["onClick"],Lt={class:"content"},Dt={key:0,class:"permission-restricted",id:"permissionRestricted"},It={class:"restricted-detail"},Ot={key:1,class:"dimension-container"},Ct=["id"],jt={__name:"DimensionView",setup(i){const l=C(),r=N(),e=j("pureland"),n=k(()=>l.currentUser?.permissionLevel||0),o=k(()=>$.getAllDimensions()),h=k(()=>$.getDimension(e.value)),v=f=>{e.value=f};S(()=>{const f=$.getAllDimensions();r.query.dimension&&f.some(c=>c.id===r.query.dimension)&&(e.value=r.query.dimension)}),T(()=>r.query.dimension,f=>{const c=$.getAllDimensions();f&&c.some(b=>b.id===f)&&(e.value=f)});const R=k(()=>$.hasPermission(e.value,n.value)),L=k(()=>$.getRequiredPermission(e.value));return(f,c)=>(t(),s("div",bt,[c[5]||(c[5]=a("h2",{class:"content-title"},"维度档案资料",-1)),a("div",$t,[a("ul",qt,[(t(!0),s(u,null,p(o.value,b=>(t(),s("li",{key:b.id,class:q(["sub-nav-item",{active:e.value===b.id}]),onClick:St=>v(b.id)},x(b.name),11,Rt))),128))]),a("div",Lt,[R.value?(t(),s("div",Ot,[h.value?(t(),s("div",{key:0,class:q(["dimension-content",`${e.value}-content`]),id:`${e.value}-dimension`},[_(kt,{sections:h.value.content.sections},null,8,["sections"])],10,Ct)):m("",!0)])):(t(),s("div",Dt,[c[3]||(c[3]=a("div",{class:"restricted-icon"},"⛔",-1)),c[4]||(c[4]=a("div",{class:"restricted-message"},"权限不足",-1)),a("div",It,[D(" 您当前的权限等级 ("+x(n.value)+") 无法访问此维度档案。",1),c[0]||(c[0]=a("br",null,null,-1)),D(" 该档案需要权限等级: "+x(L.value),1),c[1]||(c[1]=a("br",null,null,-1)),c[2]||(c[2]=D(" 请使用更高权限的账户登录。 ",-1))])]))])])]))}},At=y(jt,[["__scopeId","data-v-b05d584e"]]);export{At as default};
