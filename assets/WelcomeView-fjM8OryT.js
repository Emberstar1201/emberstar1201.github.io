import{_ as L,r as v,o as T,a as C,c as d,b as c,d as F,e as a,t as w,f as _,w as M,g as x,F as I,h as V,i as b,v as k,T as N,j as U,n as R,k as A}from"./index-KJ6vwG-3.js";import{u as E}from"./user-CSwkHV7l.js";const $=[{username:"Emberstar",password:"Emberstar0160",displayName:"星荧",permission:"✧",permissionLevel:7},{username:"Lumirise",password:"Lumirise0430",displayName:"璃梦",permission:"Ⅹ",permissionLevel:6},{username:"Cielune",password:"Cielune0501",displayName:"希月",permission:"Ⅹ",permissionLevel:6},{username:"Seren",password:"Seren1160",displayName:"久夜",permission:"Ⅹ",permissionLevel:6},{username:"Vanya",password:"Vanya0959",displayName:"银铃",permission:"Ⅹ",permissionLevel:6},{username:"TanJiu",password:"TanJiu0425",displayName:"檀玖",permission:"Ω",permissionLevel:5},{username:"Lumiere",password:"Lumiere0660",displayName:"璃依",permission:"Ω",permissionLevel:5},{username:"QiZixuan",password:"QiZixuan1031",displayName:"戚紫萱",permission:"Ψ",permissionLevel:4},{username:"Selaine",password:"Selaine0715",displayName:"陌叶",permission:"Θ",permissionLevel:3},{username:"Lumina",password:"Lumina1201",displayName:"陌心",permission:"Θ",permissionLevel:3},{username:"EtherealVelos",password:"EtherealVelos0860",displayName:"艾瑟尔·维洛斯",permission:"Ψ",permissionLevel:4},{username:"QiYubai",password:"QiYubai0228",displayName:"戚羽白",permission:"Ψ",permissionLevel:4}];function P(){return $}function S(f){return $.find(n=>n.username===f)}const W={__name:"MultilingualTypewriter",emits:["skipLogin"],setup(f,{emit:n}){const r=n,o=["HELLO WORLD!","你好，世界！","こんにちは、世界！","안녕하세요, 세계! "],i=v(0),m=v("");let l=null,g=null;const h=(s,t=0)=>{if(l&&clearTimeout(l),t<s.length){m.value=s.substring(0,t+1);const p=/[\u4e00-\u9fa5]/.test(s[t])?150:100;l=setTimeout(()=>{h(s,t+1)},p)}else g=setTimeout(()=>{y()},3e3)},y=()=>{i.value=(i.value+1)%o.length,m.value="",h(o[i.value])},e=()=>{h(o[i.value])},u=s=>{s.stopPropagation(),l&&clearTimeout(l),g&&clearTimeout(g),r("skipLogin")};return T(()=>{e()}),C(()=>{l&&clearTimeout(l),g&&clearTimeout(g)}),(s,t)=>(c(),d("div",{class:"hello-world",id:"helloWorld",onClick:u},[F(w(m.value)+" ",1),t[0]||(t[0]=a("span",{class:"cursor"},"|",-1))]))}},B=L(W,[["__scopeId","data-v-757fb5ad"]]),q={__name:"GreetingComponent",props:{updateStage:{type:Function,required:!0}},setup(f){const n=E(),r=f,o=()=>{r.updateStage(1)},i=()=>{n.login(S("Emberstar")),r.updateStage(2)};return(m,l)=>(c(),d("div",{class:"greeting-container",onClick:o},[l[0]||(l[0]=a("div",{class:"greeting",id:"osTitle"},"EMBERSTAR OS",-1)),_(B,{onSkipLogin:i}),l[1]||(l[1]=a("div",{class:"subtitle"},"正在初始化系统...",-1))]))}},D=L(q,[["__scopeId","data-v-5dca35e2"]]),O={class:"login-container"},Q={key:"userSelection"},z={class:"user-selection",id:"userSelectionStage"},G={class:"user-list",id:"userList"},H=["onClick"],J={class:"user-info"},Y={class:"user-display-name"},Z={class:"user-username"},j={class:"user-permission"},K={key:0,class:"no-users"},X={key:"loginForm"},ee={class:"login-form",id:"loginForm"},se={class:"form-group"},te={class:"form-group"},ne={__name:"LoginFrom",props:{updateStage:{type:Function,required:!0}},setup(f){const n=E(),r=f,o=v(!1),i=v([]),m=v(""),l=v(""),g=()=>{o.value=!0,i.value.length===0&&(i.value=P())},h=()=>{o.value=!1},y=()=>{if(m.value.trim()&&l.value.trim()){const s=S(m.value);if(s&&s.password===l.value)n.login(s),r.updateStage(2);else{const t=document.getElementById("errorMessage");t&&(t.style.display="block",setTimeout(()=>{t.style.display="none"},3e3))}}else{const s=document.getElementById("errorMessage");s&&(s.style.display="block",setTimeout(()=>{s.style.display="none"},3e3))}},e=s=>{m.value=s.username,l.value=s.password,h(),y()},u=()=>{n.login(S("Emberstar")),r.updateStage(2)};return(s,t)=>(c(),d("div",O,[_(N,{name:"fade-slide",mode:"out-in"},{default:M(()=>[o.value?(c(),d("div",Q,[a("div",z,[t[3]||(t[3]=a("div",{class:"greeting"},"选择用户",-1)),a("div",G,[t[2]||(t[2]=a("div",{class:"user-list-title"},"可用账户列表",-1)),(c(!0),d(I,null,V(i.value,p=>(c(),d("div",{key:p.username,class:"user-item",onClick:_e=>e(p)},[a("div",J,[a("div",Y,w(p.displayName),1),a("div",Z,w(p.username),1)]),a("div",j,w(p.permission),1)],8,H))),128)),i.value.length===0?(c(),d("div",K,"暂无可用账户")):x("",!0)]),a("button",{class:"back-button",onClick:h,id:"backToLoginButton"},"返回登录")])])):(c(),d("div",X,[a("div",ee,[_(B,{class:"easter-egg",onSkipLogin:u}),a("div",se,[t[4]||(t[4]=a("label",{class:"form-label"},"用户名",-1)),b(a("input",{type:"text",class:"form-input",id:"usernameInput",placeholder:"输入用户名...","onUpdate:modelValue":t[0]||(t[0]=p=>m.value=p)},null,512),[[k,m.value]])]),a("div",te,[t[5]||(t[5]=a("label",{class:"form-label"},"密码",-1)),b(a("input",{type:"password",class:"form-input",id:"passwordInput",placeholder:"输入密码...","onUpdate:modelValue":t[1]||(t[1]=p=>l.value=p)},null,512),[[k,l.value]])]),a("button",{class:"login-button",id:"loginButton",onClick:y},"登录"),a("button",{class:"login-button",id:"userSelectButton",style:{"margin-top":"10px"},onClick:g},"选择用户"),t[6]||(t[6]=a("div",{class:"error-message",id:"errorMessage"},"用户名或密码错误，请重试",-1))])]))]),_:1})]))}},ae=L(ne,[["__scopeId","data-v-e84ebe92"]]),ie={class:"loading-container"},oe={class:"progress-bar"},re={class:"progress-percent",id:"progressPercent"},le={class:"loading-status",id:"loadingStatus"},ue={__name:"LoadingProgress",props:{updateStage:{type:Function,required:!0}},setup(f){const n=v(0),r=v("初始化核心组件...");return T(()=>{const o=["初始化核心组件...","加载系统模块...","配置用户环境...","连接服务中心...","系统启动完成!"],i=setInterval(()=>{n.value+=1,n.value<=20?r.value=o[0]:n.value<=40?r.value=o[1]:n.value<=60?r.value=o[2]:n.value<=80?r.value=o[3]:n.value===100&&(r.value=o[4]),n.value>=100&&(clearInterval(i),setTimeout(()=>{U.push("/system")},2e3))},50)}),(o,i)=>(c(),d("div",ie,[i[0]||(i[0]=a("div",{class:"loading-text"},"正在启动 EMBERSTAR OS...",-1)),a("div",oe,[a("div",{class:"progress-fill",id:"progressFill",style:R({width:n.value+"%"})},null,4)]),a("div",re,w(n.value)+"%",1),a("div",le,w(r.value),1)]))}},de=L(ue,[["__scopeId","data-v-a1ac10b1"]]),ce={class:"binary-rain-container"},pe={__name:"BinaryRain",setup(f){const n=v(null);let r=null,o=[],i=null;T(async()=>{await A(),m(),l(),y()}),C(()=>{cancelAnimationFrame(r)});function m(){const e=n.value;i=e.getContext("2d");function u(){e.width=window.innerWidth,e.height=window.innerHeight}u(),window.addEventListener("resize",u)}function l(){const e=n.value,u=Math.floor(e.width/25);o=[];for(let s=0;s<u;s++)o.push({x:s*25,y:Math.random()*-e.height,speed:1+Math.random()*2,length:8+Math.floor(Math.random()*12),charIndex:0,density:.8+Math.random()*.2,characters:[],lastChangeTime:0,changeInterval:500+Math.random()*1e3,frameCount:0})}function g(){return Math.random()>.5?"1":"0"}function h(e){const u=n.value;if(i.fillStyle="transparent",i.fillRect(e.x-12,0,24,u.height),e.frameCount++,e.characters.length<e.length)for(let s=e.characters.length;s<e.length;s++)e.characters[s]=g();if(e.frameCount%30===0){const s=Date.now();if(s-e.lastChangeTime>e.changeInterval){for(let t=0;t<e.length;t++)Math.random()>.7&&(e.characters[t]=g());e.lastChangeTime=s}}for(let s=0;s<e.length;s++){const t=e.y+s*20;if(t>u.height)continue;const p=.1+s/e.length*.6;i.fillStyle=`rgba(0, 255, 255, ${p})`,i.font="16px Consolas, Monaco, monospace",i.textAlign="center",i.fillText(e.characters[s],e.x,t)}e.y+=e.speed,e.y>u.height+e.length*20&&(e.y=Math.random()*-u.height,e.speed=1+Math.random()*2,e.length=8+Math.floor(Math.random()*12),e.characters=[],e.frameCount=0,e.lastChangeTime=0)}function y(){i.fillStyle="rgba(0, 0, 0, 0.3)",i.fillRect(0,0,n.value.width,n.value.height),o.forEach(e=>h(e)),r=requestAnimationFrame(y)}return(e,u)=>(c(),d("div",ce,[a("canvas",{ref_key:"rainCanvas",ref:n,class:"rain-canvas"},null,512)]))}},me=L(pe,[["__scopeId","data-v-933fb902"]]),ge={key:"greeting"},ve={key:"login"},fe={key:"loading"},he={__name:"WelcomeView",setup(f){const n=v(0),r=o=>{[0,1,2].includes(o)?n.value=o:console.error("Invalid stage value provided. Must be 0, 1, or 2.")};return(o,i)=>(c(),d(I,null,[_(me),_(N,{name:"fade",mode:"out-in"},{default:M(()=>[n.value===0?(c(),d("div",ge,[_(D,{"update-stage":r})])):n.value===1?(c(),d("div",ve,[_(ae,{"update-stage":r})])):n.value===2?(c(),d("div",fe,[_(de,{"update-stage":r})])):x("",!0)]),_:1})],64))}},Le=L(he,[["__scopeId","data-v-b5f5b125"]]);export{Le as default};
