import{_ as C,r as m,o as I,c as p,i as M,e as t,l as T,t as l,d as f,u as $,F as w,b as y,m as H,a as O,v as q,g as L,h as x,p as h,q as B,j as E,f as _,s as U}from"./index-KJ6vwG-3.js";import{u as V}from"./user-CSwkHV7l.js";import{q as F}from"./characterService-CMt19uli.js";import{d as j}from"./dimensionService-2KA3iTsw.js";const z={class:"system-header"},P={class:"system-title-container"},Q={class:"system-title"},Y={class:"permission-badge",id:"currentUserBadge"},G={class:"access-granted"},J={id:"currentUserName"},K={class:"system-time-container"},W={class:"system-time",id:"systemTime"},X={id:"lastHeartbeat"},Z={__name:"SystemHeader",setup(c){const s=V(),a=m(new Date),e=m(!1),i=m(120),S=()=>{if(document.body.classList.contains("desaturate"))return;document.body.classList.add("desaturate"),e.value=!0,i.value=120;const r=setInterval(()=>{i.value--,i.value<=0&&(clearInterval(r),document.body.classList.remove("desaturate"),e.value=!1)},1e3)};return I(()=>{setInterval(()=>{a.value=new Date},1e3)}),(r,d)=>(y(),p(w,null,[M(t("div",{class:"desaturate-timer"},l(i.value),513),[[T,e.value]]),t("div",z,[t("div",P,[t("div",Q,[d[0]||(d[0]=f("EMBERSTAR OS 2.1 ",-1)),t("span",Y,"æƒé™ï¼š"+l($(s).currentUser?.permission||"æœªç™»å½•"),1)]),t("div",G,[d[1]||(d[1]=f("å½“å‰ç”¨æˆ·: ",-1)),t("span",J,l($(s).currentUser?.displayName||"æœªç™»å½•"),1)])]),t("div",K,[t("div",W,"å§‹æºåŽ†14200å¹´1æœˆ"+l(a.value.getDate())+"æ—¥"+l(a.value.getHours().toString().padStart(2,"0"))+":"+l(a.value.getMinutes().toString().padStart(2,"0"))+":"+l(a.value.getSeconds().toString().padStart(2,"0")),1),t("div",{class:"heartbeat",onClick:S},[d[2]||(d[2]=f("æœ€åŽå¿ƒè·³: ",-1)),t("span",X,l(a.value.getHours().toString().padStart(2,"0"))+":"+l(a.value.getMinutes().toString().padStart(2,"0"))+":"+l(a.value.getSeconds().toString().padStart(2,"0")),1),d[3]||(d[3]=t("span",{class:"blink"},"_",-1))])])])],64))}},ee=C(Z,[["__scopeId","data-v-29a0b794"]]),te=["onClick"],se={class:"result-type"},ae={class:"result-name"},ne={class:"result-detail"},re={key:0,class:"no-results"},oe={__name:"SearchInput",setup(c){const s=m(""),a=m([]),e=m(!1),i=m(null),S=B(),r={CHARACTER:"è§’è‰²",DIMENSION:"ç»´åº¦",COMMAND:"å‘½ä»¤"},d=[{id:1,name:"è§’è‰²",type:r.CHARACTER,detail:"è§’è‰²æ¡£æ¡ˆèµ„æ–™",route:"/system/character"},{id:2,name:"ç›‘æŽ§",type:r.COMMAND,detail:"ç³»ç»ŸçŠ¶æ€å®žæ—¶ç›‘æŽ§",route:"/system/monitor"},{id:3,name:"å®ˆæŠ¤",type:r.COMMAND,detail:"ç³»ç»Ÿå®‰å…¨å®ˆæŠ¤",route:"/system/defender"},{id:4,name:"çµé­‚é¢‘çŽ‡",type:r.COMMAND,detail:"çµé­‚é¢‘çŽ‡åˆ†æž",route:"/system/soul-frequency"},{id:5,name:"è§’è‰²æ¡£æ¡ˆ",type:r.CHARACTER,detail:"æŸ¥çœ‹æ‰€æœ‰è§’è‰²ä¿¡æ¯",route:"/system/character"},{id:6,name:"ç»´åº¦æ¡£æ¡ˆ",type:r.DIMENSION,detail:"æŸ¥çœ‹æ‰€æœ‰ç»´åº¦ä¿¡æ¯",route:"/system/dimension"},{id:7,name:"ç›‘æŽ§è§†å›¾",type:r.COMMAND,detail:"å®žæ—¶ç›‘æŽ§ç³»ç»ŸçŠ¶æ€",route:"/system/monitor"},{id:8,name:"å®ˆæŠ¤è§†å›¾",type:r.COMMAND,detail:"æŸ¥çœ‹ç³»ç»Ÿå®‰å…¨å®ˆæŠ¤",route:"/system/defender"}],R=H(()=>{if(!s.value.trim())return[];const n=s.value.toLowerCase(),v=[],u=F(n);u.length>0&&u.forEach(o=>{v.push({id:`character-${o.id}`,name:o.name,alias:o.alias,type:r.CHARACTER,detail:`${o.personality.substring(0,20)}...`,route:"/system/character",characterId:o.id})});const g=j.searchDimensions(n);g.length>0&&g.forEach(o=>{v.push({id:`dimension-${o.id}`,name:o.name,type:r.DIMENSION,detail:o.detail,route:o.route,dimension:o.dimension})});const D=d.filter(o=>o.type!==r.CHARACTER&&(o.name.toLowerCase().includes(n)||o.detail.toLowerCase().includes(n)||o.type.toLowerCase().includes(n)));return[...v,...D]}),k=()=>{a.value=R.value,e.value=a.value.length>0},A=()=>{a.value=R.value,e.value=a.value.length>0},N=n=>{n.route&&(n.type===r.DIMENSION&&n.dimension?S.push({path:n.route,query:{dimension:n.dimension}}):n.type===r.CHARACTER&&n.characterId?S.push({path:n.route,query:{characterId:n.characterId}}):S.push(n.route)),s.value="",e.value=!1},b=n=>{i.value&&!i.value.contains(n.target)&&(e.value=!1)};return I(()=>{document.addEventListener("click",b)}),O(()=>{document.removeEventListener("click",b)}),(n,v)=>(y(),p("div",{class:"search-container",ref_key:"searchContainer",ref:i},[M(t("input",{type:"text",class:"search-input","onUpdate:modelValue":v[0]||(v[0]=u=>s.value=u),placeholder:"æœç´¢è§’è‰²ã€ç»´åº¦æˆ–å‘½ä»¤...",onInput:k,onFocus:v[1]||(v[1]=u=>e.value=a.value.length>0)},null,544),[[q,s.value]]),t("button",{class:"search-button",onClick:A},"ðŸ”"),t("div",{class:h(["search-results",{active:e.value}])},[(y(!0),p(w,null,x(a.value,u=>(y(),p("div",{key:u.id,class:"search-result-item",onClick:g=>N(u)},[t("span",se,l(u.type),1),t("span",ae,l(u.name)+l(u.alias?` (${u.alias})`:""),1),t("div",ne,l(u.detail),1)],8,te))),128)),a.value.length===0&&s.value.trim()?(y(),p("div",re," æœªæ‰¾åˆ°åŒ¹é…ç»“æžœ ")):L("",!0)],2)],512))}},ie=C(oe,[["__scopeId","data-v-73733260"]]),le={class:"sidebar"},ue={__name:"SideBar",props:{switchSubsystem:{type:Function,required:!0}},setup(c){const s=m("");return(a,e)=>(y(),p("div",le,[e[5]||(e[5]=t("div",{class:"sidebar-title"},"ç³»ç»Ÿå¯¼èˆª",-1)),e[6]||(e[6]=f(" Â  ",-1)),t("div",{class:h(["nav-item",{active:s.value==="monitor"}]),onClick:e[0]||(e[0]=i=>{s.value="monitor",c.switchSubsystem("monitor")})},"æ—¥å¸¸æ£€æµ‹æŠ¥å‘Š",2),t("div",{class:h(["nav-item",{active:s.value==="defender"}]),onClick:e[1]||(e[1]=i=>{s.value="defender",c.switchSubsystem("defender")})},"é˜²å¾¡ç³»ç»Ÿ",2),t("div",{class:h(["nav-item",{active:s.value==="soul-frequency"}]),onClick:e[2]||(e[2]=i=>{s.value="soul-frequency",c.switchSubsystem("soul-frequency")})},"çµé­‚é¢‘çŽ‡ç›‘æµ‹",2),t("div",{class:h(["nav-item",{active:s.value==="character"}]),onClick:e[3]||(e[3]=i=>{s.value="character",c.switchSubsystem("character")})},"è§’è‰²æ¡£æ¡ˆèµ„æ–™",2),t("div",{class:h(["nav-item",{active:s.value==="dimension"}]),onClick:e[4]||(e[4]=i=>{s.value="dimension",c.switchSubsystem("dimension")})},"ç»´åº¦æ¡£æ¡ˆèµ„æ–™",2)]))}},de=C(ue,[["__scopeId","data-v-cf4e9114"]]),ce={class:"main-content"},ve={__name:"SystemView",setup(c){const s=a=>{E.push(`/system/${a}`)};return I(()=>{E.push("/system/monitor")}),(a,e)=>{const i=U("router-view");return y(),p(w,null,[_(ee),_(ie),t("div",ce,[_(de,{switchSubsystem:s}),_(i,{class:"content-area"})])],64)}}},Se=C(ve,[["__scopeId","data-v-373323c3"]]);export{Se as default};
